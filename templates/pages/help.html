{% extends "base/base.html" %}

{% block title %}Help Documentation - Poria Cocos Target Prediction Database{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Page Title -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-6 mb-3">
                <i class="fas fa-question-circle text-primary me-2"></i>Help Documentation
            </h1>
            <p class="lead text-muted">Learn how to use the Poria Cocos Target Prediction Database</p>
        </div>
    </div>

    <div class="row">
        <!-- Left Side Navigation -->
        <div class="col-lg-3">
            <div class="card sticky-top">
                <div class="card-header">
                    <h6 class="card-title mb-0">Quick Navigation</h6>
                </div>
                <div class="card-body">
                    <nav class="nav flex-column">
                        <a class="nav-link" href="#overview">Database Overview</a>
                        <a class="nav-link" href="#data-structure">Data Structure</a>
                        <a class="nav-link" href="#how-to-use">How to Use</a>
                        <a class="nav-link" href="#api-docs">API Documentation</a>
                        <a class="nav-link" href="#faq">FAQ</a>
                        <a class="nav-link" href="#contact">Contact Us</a>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
            <!-- Database Overview -->
            <section id="overview" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">Database Overview</h3>
                    </div>
                    <div class="card-body">
                        <p>The Poria Cocos Target Prediction Database is a platform for predicting interactions between active ingredients of traditional Chinese medicine and their targets, built using deep learning technology. It employs the DrugBAN (Bilinear Attention Network) model for predictive analysis.</p>
                        
                        <div class="row">
                            <div class="col-md-4 text-center">
                                <div class="bg-primary text-white rounded p-3 mb-3">
                                    <h2 class="display-6">151</h2>
                                    <p class="mb-0">Active Compounds</p>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="bg-success text-white rounded p-3 mb-3">
                                    <h2 class="display-6">1,885</h2>
                                    <p class="mb-0">Predicted Targets</p>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="bg-info text-white rounded p-3 mb-3">
                                    <h2 class="display-6">21,488</h2>
                                    <p class="mb-0">High-Confidence Interactions</p>
                                </div>
                            </div>
                        </div>
                        
                        <h5 class="mt-4">Key Features:</h5>
                        <ul>
                            <li><strong>Deep Learning Prediction</strong>: Based on the DrugBAN model, with a prediction confidence of ≥0.95.</li>
                            <li><strong>Multiple Compound Types</strong>: Includes three major categories of active ingredients: volatile oils, triterpenes, and sterols.</li>
                            <li><strong>Enrichment Analysis</strong>: Integrated with GO functional enrichment and KEGG pathway analysis.</li>
                            <li><strong>Structure Visualization</strong>: Supports SMILES structure display and 3D conformation prediction.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Data Structure -->
            <section id="data-structure" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">Data Structure</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Compound Data</h5>
                                <ul>
                                    <li>Compound ID (Global ID and Local ID)</li>
                                    <li>Chinese Name and English Name</li>
                                    <li>Compound Type (Volatile Oil / Triterpene / Sterol)</li>
                                    <li>Molecular Formula and Molecular Weight</li>
                                    <li>SMILES String</li>
                                    <li>PubChem CID (if available)</li>
                                    <li>Physicochemical Properties</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5>Target Data</h5>
                                <ul>
                                    <li>Gene Name and Gene Symbol</li>
                                    <li>UniProt ID</li>
                                    <li>Protein Name</li>
                                    <li>Functional Annotation</li>
                                    <li>Subcellular Location</li>
                                    <li>Prediction Score Statistics</li>
                                    <li>Related Compound Information</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How to Use -->
            <section id="how-to-use" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">How to Use</h3>
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="usageAccordion">
                            <!-- Browse Compounds -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                                        <i class="fas fa-atom text-primary me-2"></i>Browse Compounds
                                    </button>
                                </h2>
                                <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#usageAccordion">
                                    <div class="accordion-body">
                                        <p>On the <strong>Compounds</strong> page, you can:</p>
                                        <ol>
                                            <li>Browse the list of all compounds.</li>
                                            <li>Filter by type (Volatile Oil / Triterpene / Sterol).</li>
                                            <li>Search for specific compounds.</li>
                                            <li>Click on a compound to view its detailed information.</li>
                                            <li>View predicted targets and molecular structure.</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <!-- View Targets -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                                        <i class="fas fa-bullseye text-success me-2"></i>View Targets
                                    </button>
                                </h2>
                                <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#usageAccordion">
                                    <div class="accordion-body">
                                        <p>On the <strong>Targets</strong> page, you can:</p>
                                        <ol>
                                            <li>Browse all predicted targets.</li>
                                            <li>Filter by gene family (UGT / CYP450, etc.).</li>
                                            <li>View prediction statistics for targets.</li>
                                            <li>Understand the functional annotation of targets.</li>
                                            <li>View related compounds.</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <!-- Search Functionality -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                                        <i class="fas fa-search text-info me-2"></i>Search Functionality
                                    </button>
                                </h2>
                                <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#usageAccordion">
                                    <div class="accordion-body">
                                        <p>The database offers multiple search methods:</p>
                                        <ul>
                                            <li><strong>Global Search</strong>: In the navigation bar search box or on the search page.</li>
                                            <li><strong>Compound Search</strong>: By name, molecular formula, or SMILES.</li>
                                            <li><strong>Target Search</strong>: By gene name, symbol, or function.</li>
                                        </ul>
                                        <p>Fuzzy matching and keyword searches are supported.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API Documentation -->
            <section id="api-docs" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">API Documentation</h3>
                    </div>
                    <div class="card-body">
                        <p>The database provides a RESTful API for programmatic access:</p>
                        
                        <h5>Basic Information</h5>
                        <ul>
                            <li><strong>API Base URL</strong>: <code>/api</code></li>
                            <li><strong>Data Format</strong>: JSON</li>
                            <li><strong>Character Encoding</strong>: UTF-8</li>
                        </ul>
                        
                        <h5>Main Endpoints</h5>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Endpoint</th>
                                        <th>Method</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>/api/compounds</code></td>
                                        <td>GET</td>
                                        <td>Get a list of compounds.</td>
                                    </tr>
                                    <tr>
                                        <td><code>/api/compounds/{id}</code></td>
                                        <td>GET</td>
                                        <td>Get details of a specific compound.</td>
                                    </tr>
                                    <tr>
                                        <td><code>/api/targets</code></td>
                                        <td>GET</td>
                                        <td>Get a list of targets.</td>
                                    </tr>
                                    <tr>
                                        <td><code>/api/targets/{gene_name}</code></td>
                                        <td>GET</td>
                                        <td>Get details of a specific target.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            For detailed API documentation, please visit: <a href="/api" target="_blank">API Documentation</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FAQ -->
            <section id="faq" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">Frequently Asked Questions</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <h5>Q: What do the prediction scores mean?</h5>
                                <p>A: The prediction score indicates the likelihood of a compound binding to a target, ranging from 0 to 1. A score of ≥0.95 is considered a high-confidence interaction.</p>
                                
                                <h5>Q: What are the data sources?</h5>
                                <p>A: Compound data is sourced from scientific literature and public databases. Protein data is primarily from databases like UniProt. The prediction results are based on the DrugBAN deep learning model.</p>
                                
                                <h5>Q: How should I cite this database?</h5>
                                <p>A: Please cite the relevant research paper and the database URL. Contact us for the specific citation format.</p>
                                
                                <h5>Q: How often is the data updated?</h5>
                                <p>A: The database is updated periodically to include new compounds and improved prediction results.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact Us -->
            <section id="contact" class="mb-5">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title mb-0">Contact Us</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Technical Support</h5>
                                <p>If you encounter any issues or have suggestions for improvement, please contact us:</p>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-envelope me-2"></i>Email: support@example.com</li>
                                    <li><i class="fas fa-globe me-2"></i>Project Homepage: GitHub Repository</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5>Feedback & Suggestions</h5>
                                <p>We welcome your feedback and suggestions to help us continuously improve the database:</p>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-bug me-2"></i>Bug Reports</li>
                                    <li><i class="fas fa-lightbulb me-2"></i>Feature Suggestions</li>
                                    <li><i class="fas fa-database me-2"></i>Data Quality Issues</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}