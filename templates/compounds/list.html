{% extends "base/base.html" %}

{% block title %}化合物列表 - 茯苓靶点预测数据库{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- 页面标题 -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-6 mb-3">
                <i class="fas fa-atom text-primary me-2"></i>茯苓化合物数据库
            </h1>
            <p class="text-muted">共收录 {{ stats.total if stats else 151 }} 个活性化合物</p>
        </div>
    </div>

    {% if error %}
    <!-- 错误信息 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>{{ error }}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- 简单筛选工具栏 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-4">
                            <label for="typeFilter" class="form-label">化合物类型</label>
                            <select class="form-select" id="typeFilter">
                                <option value="all">全部类型</option>
                                <option value="挥发油">挥发油类</option>
                                <option value="三萜">三萜类</option>
                                <option value="甾醇">甾醇类</option>
                            </select>
                        </div>
                        <div class="col-md-8">
                            <label for="searchInput" class="form-label">搜索</label>
                            <input type="text" class="form-control" id="searchInput" 
                                   placeholder="输入化合物名称或分子式..." value="{{ search or '' }}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 化合物数据表格 -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <table id="compoundsTable" class="table table-striped table-hover w-100">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>中文名</th>
                                <th>英文名</th>
                                <th>类型</th>
                                <th>分子式</th>
                                <th>分子量</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- DataTables will populate this -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// 页面配置传递给JavaScript
window.pageConfig = {
    compoundType: '{{ compound_type or "all" }}',
    searchQuery: '{{ search or "" }}'
};
</script>
<script src="{{ url_for('static', filename='js/compounds.js') }}"></script>
{% endblock %}