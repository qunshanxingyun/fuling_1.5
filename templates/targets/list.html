{% extends "base/base.html" %}

{% block title %}靶点列表 - 茯苓靶点预测数据库{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- 页面标题 -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-6 mb-3">
                <i class="fas fa-bullseye text-primary me-2"></i>预测靶点数据库
            </h1>
            <p class="text-muted">共收录 {{ stats.total_targets if stats else 1885 }} 个预测靶点</p>
        </div>
    </div>

    {% if error %}
    <!-- 错误信息 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>{{ error }}
            </div>
        </div>
    </div>
    {% endif %}
    <!-- 简单筛选工具栏 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-4">
                        </div>
                        <div class="col-md-8">
                            <label for="searchInput" class="form-label">搜索</label>
                            <input type="text" class="form-control" id="searchInput" 
                                   placeholder="输入基因名称、符号或功能..." value="{{ search or '' }}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 靶点数据表格 -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <table id="targetsTable" class="table table-striped table-hover w-100">
                        <thead>
                            <tr>
                                <th>基因名称</th>
                                <th>基因符号</th>
                                <th>预测次数</th>
                                <th>平均得分</th>
                                <th>UniProt ID</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- DataTables will populate this -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// 页面配置传递给JavaScript
window.pageConfig = {
    geneFamily: '{{ gene_family or "all" }}',
    searchQuery: '{{ search or "" }}'
};
</script>
<script src="{{ url_for('static', filename='js/targets.js') }}"></script>
{% endblock %}